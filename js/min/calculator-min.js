var c,Calculator={settings:{numButton:$(".calc-number"),funcButton:$(".calc-function"),clearButton:$("#c"),percentButton:$("#percent"),signButton:$("#plus-minus"),result:$("#result"),calculation:0,currentNumberString:"",currentNumber:0,calcArray:[0],operation:""},init:function(){c=this.settings,this.bindUIActions()},bindUIActions:function(){var r=!1,t=!1;c.numButton.on("click",function(){var c=this.id;Calculator.handleNumber(c)}),c.funcButton.on("click",function(){var c=this.id;Calculator.handleOperation(c)}),c.clearButton.on("click",function(){Calculator.clearCalculations()}),c.percentButton.on("click",function(){Calculator.makePercentage()}),c.signButton.on("click",function(){Calculator.changeSign()}),$(document).keydown(function(c){12===c.which&&Calculator.clearCalculations(),18===c.which&&(r=!0),109===c.which&&r===!0?Calculator.changeSign():109===c.which&&Calculator.handleOperation("subtract"),16===c.which&&(t=!0),53===c.which&&t===!0?Calculator.makePercentage():53===c.which&&Calculator.handleNumber("5"),111===c.which&&Calculator.handleOperation("divide"),55===c.which&&Calculator.handleNumber("7"),56===c.which&&Calculator.handleNumber("8"),57===c.which&&Calculator.handleNumber("9"),106===c.which&&Calculator.handleOperation("multiply"),52===c.which&&Calculator.handleNumber("4"),54===c.which&&Calculator.handleNumber("6"),49===c.which&&Calculator.handleNumber("1"),50===c.which&&Calculator.handleNumber("2"),51===c.which&&Calculator.handleNumber("3"),107===c.which&&Calculator.handleOperation("add"),48===c.which&&Calculator.handleNumber("0"),110===c.which&&Calculator.handleNumber("dot"),13===c.which&&Calculator.handleOperation("equals")}),$(document).keyup(function(c){18===c.which&&(r=!1),16===c.which&&(t=!1)})},handleOperation:function(r){if(c.currentNumber=parseFloat(c.currentNumberString),Number.isNaN(c.currentNumber)===!1&&(""===c.operation?c.calcArray=[c.currentNumber]:c.calcArray.push(c.currentNumber)),c.currentNumberString="",c.calcArray.length>1){var t=c.calcArray[0],a=c.calcArray[1],u=Calculator.split(t),n=Calculator.split(a),e;switch(e=u>n?u:n,c.operation){case"divide":c.calculation=Calculator.round(t/a,e);break;case"multiply":c.calculation=Calculator.round(t*a,e);break;case"subtract":c.calculation=Calculator.round(t-a,e);break;case"add":c.calculation=Calculator.round(t+a,e)}c.calcArray=[],c.result.text(Calculator.formatLength(c.calculation)),c.calcArray.push(c.calculation)}"divide"===r||"multiply"===r||"add"===r||"subtract"===r?c.operation=r:"equals"===r&&(c.operation="")},handleNumber:function(r){"dot"===r?c.currentNumberString+=".":c.currentNumberString+=r,c.result.text(Calculator.formatLength(c.currentNumberString))},clearCalculations:function(){c.calculation=0,c.currentNumberString="",c.currentNumber=0,c.calcArray=[0],c.operation="",c.result.text(Calculator.formatLength(c.calculation))},split:function(c){var r=c.toString().split(".")[1];return"undefined"==typeof r?0:r.length},round:function(c,r){return Math.round(parseFloat(c)*Math.pow(10,r))/Math.pow(10,r)},makePercentage:function(){var r,t;""===c.currentNumberString?(r=Calculator.split(c.calcArray[0]),t=r+2,c.calcArray[0]=Calculator.round(.01*c.calcArray[0],t),c.result.text(Calculator.formatLength(c.calcArray[0]))):(c.currentNumber=parseFloat(c.currentNumberString),r=Calculator.split(c.currentNumber),t=r+2,c.currentNumber=Calculator.round(.01*c.currentNumber,t),c.result.text(Calculator.formatLength(c.currentNumber)),Number.isNaN(c.currentNumber)===!1&&(""===c.operation?c.calcArray=[c.currentNumber]:c.calcArray.push(c.currentNumber)),c.currentNumberString="")},changeSign:function(){""===c.currentNumberString?(c.calcArray[0]*=-1,c.result.text(Calculator.formatLength(c.calcArray[0]))):(c.currentNumber=parseFloat(c.currentNumberString),c.currentNumber*=-1,c.result.text(Calculator.formatLength(c.currentNumber)),Number.isNaN(c.currentNumber)===!1&&(""===c.operation?c.calcArray=[c.currentNumber]:c.calcArray.push(c.currentNumber)),c.currentNumberString="")},formatLength:function(c){return c.toString().length>11?c.toExponential(5):c}};$(document).ready(function(){Calculator.init()});